(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["sales-index-js"],{

/***/ "./src/pages/sales/index.js":
/*!**********************************!*\
  !*** ./src/pages/sales/index.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Page; });\n/* harmony import */ var _components_range_picker_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/range-picker/index.js */ \"./src/components/range-picker/index.js\");\n/* harmony import */ var _components_sortable_table_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/sortable-table/index.js */ \"./src/components/sortable-table/index.js\");\n/* harmony import */ var _sales_header_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sales-header.js */ \"./src/pages/sales/sales-header.js\");\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/helpers */ \"./src/utils/helpers.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nclass Page {\n  constructor() {\n    _defineProperty(this, \"element\", null);\n\n    _defineProperty(this, \"subElements\", {});\n\n    this.range = {\n      from: new Date(),\n      to: new Date()\n    };\n    this.range.from = Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this.range.from, this.range.from.getUTCMonth() - 1);\n  }\n\n  render() {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = this.template;\n    this.element = wrapper.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n    this.initComponents();\n    this.renderComponents();\n    this.initEventListeners();\n    return this.element;\n  }\n\n  get template() {\n    return `\n        <div class=\"sales full-height flex-column\">\n\n            <div class=\"content__top-panel\">\n              <h2 class=\"page-title\">Sales</h2>\n              <!-- RangePicker -->\n              <div data-element=\"rangePicker\"></div>\n            </div>\n\n            <!-- ordersContainer -->\n            <div data-element=\"ordersContainer\" class=\"full-height flex-column\"></div>\n        </div>`;\n  }\n\n  initComponents() {\n    const rangePicker = new _components_range_picker_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.range);\n    const ordersContainer = new _components_sortable_table_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](_sales_header_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      url: `api/rest/orders?createdAt_gte=${this.range.from.toISOString()}&createdAt_lte=${this.range.to.toISOString()}`,\n      isSortLocally: false,\n      sorted: {\n        id: 'createdAt',\n        order: 'desc'\n      },\n      emptyPlaceholder: '<div><p>No orders</p></div>',\n      isRowALink: false\n    });\n    this.components = {\n      rangePicker,\n      ordersContainer\n    };\n  }\n\n  renderComponents() {\n    Object.keys(this.subElements).forEach(key => {\n      this.subElements[key].append(this.components[key].element);\n    });\n  }\n\n  initEventListeners() {\n    this.element.addEventListener('date-select', event => {\n      this.range = event.detail;\n      this.updateComponents(this.range);\n    });\n  }\n\n  updateComponents(range) {\n    const {\n      from,\n      to\n    } = range;\n    const fromISO = from.toISOString();\n    const toISO = to.toISOString();\n    const url = `api/rest/orders?createdAt_gte=${fromISO}&createdAt_lte=${toISO}`;\n    this.components.ordersContainer.update(url);\n  }\n\n  getSubElements(element) {\n    const subElements = element.querySelectorAll('[data-element]');\n    return [...subElements].reduce((result, subElement) => {\n      result[subElement.dataset.element] = subElement;\n      return result;\n    }, {});\n  }\n\n  remove() {\n    if (this.element) {\n      this.element.remove();\n    }\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    this.subElements = {};\n\n    for (const component of Object.values(this.components)) {\n      component.destroy();\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvc2FsZXMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvc2FsZXMvaW5kZXguanM/ZGQzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmFuZ2VQaWNrZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9yYW5nZS1waWNrZXIvaW5kZXguanMnO1xuaW1wb3J0IFNvcnRhYmxlVGFibGUgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9zb3J0YWJsZS10YWJsZS9pbmRleC5qcyc7XG5cbmltcG9ydCBoZWFkZXIgZnJvbSAnLi9zYWxlcy1oZWFkZXIuanMnO1xuaW1wb3J0IHNldFVUQ01vbnRoQ29ycmVjdGx5IGZyb20gJy4uLy4uL3V0aWxzL2hlbHBlcnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlIHtcbiAgZWxlbWVudCA9IG51bGw7XG4gIHN1YkVsZW1lbnRzID0ge307XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yYW5nZSA9IHtcbiAgICAgIGZyb206IG5ldyBEYXRlKCksXG4gICAgICB0bzogbmV3IERhdGUoKVxuICAgIH1cblxuICAgIHRoaXMucmFuZ2UuZnJvbSA9IHNldFVUQ01vbnRoQ29ycmVjdGx5KHRoaXMucmFuZ2UuZnJvbSwgdGhpcy5yYW5nZS5mcm9tLmdldFVUQ01vbnRoKCkgLSAxKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICB3cmFwcGVyLmlubmVySFRNTCA9IHRoaXMudGVtcGxhdGU7XG5cbiAgICB0aGlzLmVsZW1lbnQgPSB3cmFwcGVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIHRoaXMuc3ViRWxlbWVudHMgPSB0aGlzLmdldFN1YkVsZW1lbnRzKHRoaXMuZWxlbWVudCk7XG5cbiAgICB0aGlzLmluaXRDb21wb25lbnRzKCk7XG4gICAgdGhpcy5yZW5kZXJDb21wb25lbnRzKCk7XG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cblxuICBnZXQgdGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInNhbGVzIGZ1bGwtaGVpZ2h0IGZsZXgtY29sdW1uXCI+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50X190b3AtcGFuZWxcIj5cbiAgICAgICAgICAgICAgPGgyIGNsYXNzPVwicGFnZS10aXRsZVwiPlNhbGVzPC9oMj5cbiAgICAgICAgICAgICAgPCEtLSBSYW5nZVBpY2tlciAtLT5cbiAgICAgICAgICAgICAgPGRpdiBkYXRhLWVsZW1lbnQ9XCJyYW5nZVBpY2tlclwiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gb3JkZXJzQ29udGFpbmVyIC0tPlxuICAgICAgICAgICAgPGRpdiBkYXRhLWVsZW1lbnQ9XCJvcmRlcnNDb250YWluZXJcIiBjbGFzcz1cImZ1bGwtaGVpZ2h0IGZsZXgtY29sdW1uXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PmA7XG4gIH1cblxuICBpbml0Q29tcG9uZW50cygpIHtcbiAgICBjb25zdCByYW5nZVBpY2tlciA9IG5ldyBSYW5nZVBpY2tlcih0aGlzLnJhbmdlKTtcblxuICAgIGNvbnN0IG9yZGVyc0NvbnRhaW5lciA9IG5ldyBTb3J0YWJsZVRhYmxlKGhlYWRlciwge1xuICAgICAgdXJsOiBgYXBpL3Jlc3Qvb3JkZXJzP2NyZWF0ZWRBdF9ndGU9JHt0aGlzLnJhbmdlLmZyb20udG9JU09TdHJpbmcoKX0mY3JlYXRlZEF0X2x0ZT0ke3RoaXMucmFuZ2UudG8udG9JU09TdHJpbmcoKX1gLFxuICAgICAgaXNTb3J0TG9jYWxseTogZmFsc2UsXG4gICAgICBzb3J0ZWQ6IHtcbiAgICAgICAgaWQ6ICdjcmVhdGVkQXQnLFxuICAgICAgICBvcmRlcjogJ2Rlc2MnXG4gICAgICB9LFxuICAgICAgZW1wdHlQbGFjZWhvbGRlcjogJzxkaXY+PHA+Tm8gb3JkZXJzPC9wPjwvZGl2PicsXG4gICAgICBpc1Jvd0FMaW5rOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgdGhpcy5jb21wb25lbnRzID0ge1xuICAgICAgcmFuZ2VQaWNrZXIsXG4gICAgICBvcmRlcnNDb250YWluZXJcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyQ29tcG9uZW50cygpIHtcbiAgICBPYmplY3Qua2V5cyh0aGlzLnN1YkVsZW1lbnRzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICB0aGlzLnN1YkVsZW1lbnRzW2tleV0uYXBwZW5kKHRoaXMuY29tcG9uZW50c1trZXldLmVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgaW5pdEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkYXRlLXNlbGVjdCcsIGV2ZW50ID0+IHtcbiAgICAgIHRoaXMucmFuZ2UgPSBldmVudC5kZXRhaWw7XG5cbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50cyh0aGlzLnJhbmdlKTtcbiAgICB9KVxuICB9XG5cbiAgdXBkYXRlQ29tcG9uZW50cyhyYW5nZSkge1xuICAgIGNvbnN0IHtmcm9tLCB0b30gPSByYW5nZTtcbiAgICBjb25zdCBmcm9tSVNPID0gZnJvbS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IHRvSVNPID0gdG8udG9JU09TdHJpbmcoKTtcblxuICAgIGNvbnN0IHVybCA9IGBhcGkvcmVzdC9vcmRlcnM/Y3JlYXRlZEF0X2d0ZT0ke2Zyb21JU099JmNyZWF0ZWRBdF9sdGU9JHt0b0lTT31gO1xuXG4gICAgdGhpcy5jb21wb25lbnRzLm9yZGVyc0NvbnRhaW5lci51cGRhdGUodXJsKTtcbiAgfVxuXG4gIGdldFN1YkVsZW1lbnRzKGVsZW1lbnQpIHtcbiAgICBjb25zdCBzdWJFbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZWxlbWVudF0nKTtcblxuICAgIHJldHVybiBbLi4uc3ViRWxlbWVudHNdLnJlZHVjZSgocmVzdWx0LCBzdWJFbGVtZW50KSA9PiB7XG4gICAgICByZXN1bHRbc3ViRWxlbWVudC5kYXRhc2V0LmVsZW1lbnRdID0gc3ViRWxlbWVudDtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCB7fSk7XG4gIH1cblxuICByZW1vdmUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5yZW1vdmUoKTtcbiAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuc3ViRWxlbWVudHMgPSB7fTtcblxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIE9iamVjdC52YWx1ZXModGhpcy5jb21wb25lbnRzKSkge1xuICAgICAgY29tcG9uZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEhBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/sales/index.js\n");

/***/ }),

/***/ "./src/pages/sales/sales-header.js":
/*!*****************************************!*\
  !*** ./src/pages/sales/sales-header.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst header = [{\n  id: 'id',\n  title: 'ID',\n  sortable: true,\n  sortType: 'number'\n}, {\n  id: 'user',\n  title: 'User',\n  sortable: true,\n  sortType: 'string'\n}, {\n  id: 'createdAt',\n  title: 'Created At',\n  sortable: true,\n  sortType: 'date',\n  template: data => {\n    const date = new Date(data);\n    return `<div class=\"sortable-table__cell\">\n                ${date.toLocaleString('ru', {\n      dateStyle: 'medium'\n    })}\n              </div>`;\n  }\n}, {\n  id: 'totalCost',\n  title: 'Total Cost',\n  sortable: true,\n  sortType: 'number',\n  template: data => {\n    return `<div class=\"sortable-table__cell\">$${data.toLocaleString('en-US')}</div>`;\n  }\n}, {\n  id: 'delivery',\n  title: 'Delivery',\n  sortable: true,\n  sortType: 'number'\n}];\n/* harmony default export */ __webpack_exports__[\"default\"] = (header);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvc2FsZXMvc2FsZXMtaGVhZGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL3NhbGVzL3NhbGVzLWhlYWRlci5qcz82OWQ5Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGhlYWRlciA9IFtcbiAge1xuICAgIGlkOiAnaWQnLFxuICAgIHRpdGxlOiAnSUQnLFxuICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgIHNvcnRUeXBlOiAnbnVtYmVyJ1xuICB9LFxuICB7XG4gICAgaWQ6ICd1c2VyJyxcbiAgICB0aXRsZTogJ1VzZXInLFxuICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgIHNvcnRUeXBlOiAnc3RyaW5nJ1xuICB9LFxuICB7XG4gICAgaWQ6ICdjcmVhdGVkQXQnLFxuICAgIHRpdGxlOiAnQ3JlYXRlZCBBdCcsXG4gICAgc29ydGFibGU6IHRydWUsXG4gICAgc29ydFR5cGU6ICdkYXRlJyxcbiAgICB0ZW1wbGF0ZTogZGF0YSA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0YSk7XG5cbiAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cInNvcnRhYmxlLXRhYmxlX19jZWxsXCI+XG4gICAgICAgICAgICAgICAgJHtkYXRlLnRvTG9jYWxlU3RyaW5nKCdydScsIHtkYXRlU3R5bGU6ICdtZWRpdW0nfSl9XG4gICAgICAgICAgICAgIDwvZGl2PmA7XG4gICAgfVxuICB9LFxuICB7XG4gICAgaWQ6ICd0b3RhbENvc3QnLFxuICAgIHRpdGxlOiAnVG90YWwgQ29zdCcsXG4gICAgc29ydGFibGU6IHRydWUsXG4gICAgc29ydFR5cGU6ICdudW1iZXInLFxuICAgIHRlbXBsYXRlOiBkYXRhID0+IHtcbiAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cInNvcnRhYmxlLXRhYmxlX19jZWxsXCI+JCR7ZGF0YS50b0xvY2FsZVN0cmluZygnZW4tVVMnKX08L2Rpdj5gO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGlkOiAnZGVsaXZlcnknLFxuICAgIHRpdGxlOiAnRGVsaXZlcnknLFxuICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgIHNvcnRUeXBlOiAnbnVtYmVyJyxcbiAgfSxcbl07XG5cbmV4cG9ydCBkZWZhdWx0IGhlYWRlcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/sales/sales-header.js\n");

/***/ })

}]);