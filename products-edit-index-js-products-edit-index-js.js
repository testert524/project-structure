(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["products-edit-index-js"],{

/***/ "./src/components/notification/index.js":
/*!**********************************************!*\
  !*** ./src/components/notification/index.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return NotificationMessage; });\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass NotificationMessage {\n  constructor(message = '', settings = {\n    duration: 0,\n    type: 'error'\n  }) {\n    _defineProperty(this, \"element\", null);\n\n    this.message = message;\n    this.duration = settings.duration;\n    this.type = settings.type;\n    this.render();\n  }\n\n  render() {\n    const element = document.createElement('div');\n    element.innerHTML = this.template;\n    this.element = element.firstElementChild;\n  }\n\n  get template() {\n    return `\n      <div class=\"notification ${this.type === 'success' ? 'success' : 'error'}\" style=\"--value:${this.duration / 1000}s\">\n        <div class=\"timer\"></div>\n        <div class=\"inner-wrapper\">\n          <div class=\"notification-body\">\n            ${this.message}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  show(parentElement = document.body) {\n    if (NotificationMessage.currentNotification !== null) {\n      NotificationMessage.currentNotification.remove();\n    }\n\n    NotificationMessage.currentNotification = this;\n    this.element.classList.add('show');\n    parentElement.append(this.element);\n    setTimeout(() => {\n      this.remove();\n    }, this.duration);\n  }\n\n  remove() {\n    this.element.remove();\n  }\n\n  destroy() {\n    this.remove();\n  }\n\n}\n\n_defineProperty(NotificationMessage, \"currentNotification\", null);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9ub3RpZmljYXRpb24vaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9ub3RpZmljYXRpb24vaW5kZXguanM/ZDQwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RpZmljYXRpb25NZXNzYWdlIHtcbiAgZWxlbWVudCA9IG51bGw7XG4gIHN0YXRpYyBjdXJyZW50Tm90aWZpY2F0aW9uID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJycsIHNldHRpbmdzID0ge1xuICAgIGR1cmF0aW9uOiAwLFxuICAgIHR5cGU6ICdlcnJvcidcbiAgfSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy5kdXJhdGlvbiA9IHNldHRpbmdzLmR1cmF0aW9uO1xuICAgIHRoaXMudHlwZSA9IHNldHRpbmdzLnR5cGU7XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZTtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICB9XG5cbiAgZ2V0IHRlbXBsYXRlKCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwibm90aWZpY2F0aW9uICR7dGhpcy50eXBlID09PSAnc3VjY2VzcycgPyAnc3VjY2VzcycgOiAnZXJyb3InfVwiIHN0eWxlPVwiLS12YWx1ZToke3RoaXMuZHVyYXRpb24gLyAxMDAwfXNcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVyXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbm5lci13cmFwcGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1ib2R5XCI+XG4gICAgICAgICAgICAke3RoaXMubWVzc2FnZX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgc2hvdyhwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQuYm9keSkge1xuICAgIGlmIChOb3RpZmljYXRpb25NZXNzYWdlLmN1cnJlbnROb3RpZmljYXRpb24gIT09IG51bGwpIHtcbiAgICAgIE5vdGlmaWNhdGlvbk1lc3NhZ2UuY3VycmVudE5vdGlmaWNhdGlvbi5yZW1vdmUoKTtcbiAgICB9XG4gICAgTm90aWZpY2F0aW9uTWVzc2FnZS5jdXJyZW50Tm90aWZpY2F0aW9uID0gdGhpcztcblxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgcGFyZW50RWxlbWVudC5hcHBlbmQodGhpcy5lbGVtZW50KTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICB9LCB0aGlzLmR1cmF0aW9uKTtcbiAgfVxuXG4gIHJlbW92ZSAoKSB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnJlbW92ZSgpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBOzs7O0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeERBO0FBQ0E7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/notification/index.js\n");

/***/ }),

/***/ "./src/components/product-form/index.js":
/*!**********************************************!*\
  !*** ./src/components/product-form/index.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProductForm; });\n/* harmony import */ var _sortable_list_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sortable-list/index.js */ \"./src/components/sortable-list/index.js\");\n/* harmony import */ var _utils_escape_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/escape-html.js */ \"./src/utils/escape-html.js\");\n/* harmony import */ var _utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/fetch-json.js */ \"./src/utils/fetch-json.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nconst IMGUR_CLIENT_ID = \"28aaa2e823b03b1\";\nconst BACKEND_URL = \"https://course-js.javascript.ru/\";\nclass ProductForm {\n  constructor(productId = null) {\n    _defineProperty(this, \"element\", null);\n\n    _defineProperty(this, \"subElements\", []);\n\n    _defineProperty(this, \"product\", {});\n\n    _defineProperty(this, \"categories\", {});\n\n    _defineProperty(this, \"defaultProduct\", {\n      title: '',\n      description: '',\n      quantity: 1,\n      subcategory: '',\n      status: 1,\n      images: [],\n      price: 100,\n      discount: 0\n    });\n\n    _defineProperty(this, \"loadImage\", event => {\n      const loadImgButton = event.target;\n      const input = document.createElement('input');\n      input.type = 'file';\n      input.accept = 'image/*';\n\n      input.onchange = async event => {\n        const [imgFile] = event.target.files;\n        loadImgButton.classList.add('is-loading');\n        const response = await this.uploadToImgur(imgFile);\n        loadImgButton.classList.remove('is-loading');\n\n        if (response && response.data) {\n          const img = {\n            source: imgFile.name,\n            url: response.data.link\n          };\n          this.subElements.imageListContainer.firstElementChild.append(this.getImageElement(img));\n        }\n      };\n\n      input.dispatchEvent(new MouseEvent(\"click\"));\n    });\n\n    _defineProperty(this, \"submit\", event => {\n      event.preventDefault();\n      this.save();\n    });\n\n    this.productId = productId;\n  }\n\n  async switchFromAddToEdit(productId) {\n    this.productId = productId;\n    const data = await this.loadData(this.productId);\n    this.product = data.product;\n    this.subElements.saveButton.innerText = 'Edit product';\n  }\n\n  async render() {\n    const data = await this.loadData(this.productId);\n    this.product = data.product;\n    this.categories = data.categories;\n    this.defaultProduct.subcategory = this.categories[0].subcategories[0].id;\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = this.product ? this.getForm() : this.getEmptyTemplate();\n    this.element = wrapper.firstElementChild;\n\n    if (this.product) {\n      this.subElements = this.getSubElements(this.element);\n      this.fillFormWithObject(this.subElements.productForm, this.product);\n      this.setSortableImageList();\n      this.initEventListeners();\n    }\n\n    return this.element;\n  }\n\n  initEventListeners() {\n    const {\n      productForm,\n      imageListContainer\n    } = this.subElements;\n    productForm.addEventListener('submit', this.submit);\n    productForm.elements.uploadImage.addEventListener('pointerdown', this.loadImage);\n  }\n\n  async save() {\n    const {\n      productForm\n    } = this.subElements;\n    let method = 'PUT';\n    let event = 'product-saved';\n\n    if (this.productId) {\n      method = 'PATCH';\n      event = 'product-edited';\n    }\n\n    this.fillObjectWithForm(this.product, productForm);\n\n    try {\n      const url = new URL('api/rest/products', BACKEND_URL);\n      const params = {\n        method: method,\n        headers: {\n          'Content-type': 'application/json;charset=utf-8'\n        },\n        body: JSON.stringify(this.product)\n      };\n      const response = await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(url.href, params);\n      this.element.dispatchEvent(new CustomEvent(event, {\n        bubbles: true,\n        detail: {\n          response: response\n        }\n      }));\n    } catch (error) {\n      console.log('error', error);\n    }\n  }\n\n  async uploadToImgur(imgFile) {\n    const headers = new Headers();\n    headers.append(\"Authorization\", `Client-ID ${IMGUR_CLIENT_ID}`);\n    const formData = new FormData();\n    formData.append('image', imgFile);\n    const requestOptions = {\n      method: 'POST',\n      headers: headers,\n      body: formData,\n      redirect: 'follow'\n    };\n\n    try {\n      return await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\"https://api.imgur.com/3/image\", requestOptions);\n    } catch (error) {\n      console.log('error', error);\n    }\n  }\n\n  fillObjectWithForm(object, form) {\n    const excludedFields = ['images'];\n    const fields = Object.keys(this.defaultProduct).filter(field => !excludedFields.includes(field));\n    const convertToInt = ['price', 'discount', 'quantity', 'status'];\n    const imgHTMLCollection = this.subElements.imageListContainer.querySelectorAll('.sortable-table__cell-img');\n    fields.forEach(field => {\n      object[field] = convertToInt.includes(field) ? parseInt(form.elements[field]['value']) : form.elements[field]['value'];\n    });\n    object.images = [...imgHTMLCollection].map(img => {\n      return {\n        source: img.alt,\n        url: img.src\n      };\n    });\n\n    if (this.productId) {\n      object.id = this.productId;\n    }\n  }\n\n  fillFormWithObject(form, object) {\n    const excludedFields = ['images'];\n    const fields = Object.keys(this.defaultProduct).filter(field => !excludedFields.includes(field));\n    fields.forEach(field => {\n      form.elements[field]['value'] = object[field] || this.defaultProduct[field];\n    });\n  }\n\n  async loadData(id = null) {\n    try {\n      let [categories, [product]] = await Promise.all([this.getCategoriesPromise(), this.getProductDataPromise(id)]);\n      return {\n        categories,\n        product\n      };\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async getProductDataPromise(id) {\n    if (id) {\n      const productUrl = new URL('api/rest/products', BACKEND_URL);\n      productUrl.searchParams.append('id', id);\n      return Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(productUrl.href);\n    } else {\n      return [this.defaultProduct];\n    }\n  }\n\n  async getCategoriesPromise() {\n    const categoriesUrl = new URL('api/rest/categories', BACKEND_URL);\n    categoriesUrl.searchParams.append('_sort', 'weight');\n    categoriesUrl.searchParams.append('_refs', 'subcategory');\n    return Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(categoriesUrl.href);\n  }\n\n  getCatSelectHTML() {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = this.categories.map(category => {\n      if (category.subcategories) {\n        return category.subcategories.map(subcategory => {\n          return `<option value=\"${subcategory.id}\">${category.title} > ${subcategory.title}</option>`;\n        }).join('');\n      }\n    }).join('');\n    return wrapper.innerHTML;\n  }\n\n  setSortableImageList() {\n    const items = this.product.images.map(image => {\n      return this.getImageElement(image);\n    });\n    const sortableList = new _sortable_list_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n      items\n    });\n    this.subElements.imageListContainer.append(sortableList.element);\n  }\n\n  getImageElement(image) {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = `\n      <li class=\"products-edit__imagelist-item sortable-list__item\" style=\"\">\n        <span>\n            <img src=\"/icon-grab.svg\" data-grab-handle=\"\" alt=\"grab\">\n            <img class=\"sortable-table__cell-img\" alt=\"${Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(image.source)}\" src=\"${Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(image.url)}\">\n            <span>${Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(image.source)}</span>\n        </span>\n        <button type=\"button\">\n          <img src=\"/icon-trash.svg\" data-delete-handle=\"\" alt=\"delete\">\n        </button>\n      </li>`;\n    return wrapper.firstElementChild;\n  }\n\n  getForm() {\n    return `\n      <div class=\"product-form\">\n        <form data-element=\"productForm\" class=\"form-grid\">\n\n          <div class=\"form-group form-group__half_left\">\n            <fieldset>\n              <label class=\"form-label\">Product name</label>\n              <input id=\"title\"\n                    required=\"\"\n                    type=\"text\"\n                    name=\"title\"\n                    class=\"form-control\"\n                    placeholder=\"Product name\">\n            </fieldset>\n          </div>\n\n          <div class=\"form-group form-group__wide\">\n            <label class=\"form-label\">Description</label>\n            <textarea id=\"description\"\n                    required=\"\"\n                    class=\"form-control\"\n                    name=\"description\"\n                    data-element=\"productDescription\"\n                    placeholder=\"Product description\">\n            </textarea>\n          </div>\n\n          <div class=\"form-group form-group__wide\">\n            <label class=\"form-label\">Image</label>\n\n            <div data-element=\"imageListContainer\"></div>\n\n            <button type=\"button\"\n                    name=\"uploadImage\"\n                    class=\"button-primary-outline fit-content\">\n                <span>Upload</span>\n             </button>\n          </div>\n\n          <div class=\"form-group form-group__half_left\">\n            <label class=\"form-label\">Category</label>\n            <select class=\"form-control\" name=\"subcategory\" id=\"subcategory\">\n                ${this.getCatSelectHTML()}\n            </select>\n          </div>\n\n          <div class=\"form-group form-group__half_left form-group__two-col\">\n            <fieldset>\n              <label class=\"form-label\">Price ($)</label>\n              <input id=\"price\"\n                    equired=\"\"\n                    type=\"number\"\n                    name=\"price\"\n                    class=\"form-control\"\n                    placeholder=\"${this.defaultProduct.price}\">\n            </fieldset>\n            <fieldset>\n              <label class=\"form-label\">Discount ($)</label>\n              <input id=\"discount\"\n                    required=\"\"\n                    type=\"number\"\n                    name=\"discount\"\n                    class=\"form-control\"\n                    placeholder=\"${this.defaultProduct.discount}\">\n            </fieldset>\n          </div>\n\n          <div class=\"form-group form-group__part-half\">\n            <label class=\"form-label\">Quantity</label>\n            <input id=\"quantity\"\n                    required=\"\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    name=\"quantity\"\n                    placeholder=\"${this.defaultProduct.quantity}\">\n          </div>\n\n          <div class=\"form-group form-group__part-half\">\n            <label class=\"form-label\">Status</label>\n            <select id=\"status\" class=\"form-control\" name=\"status\">\n              <option value=\"1\">Active</option>\n              <option value=\"0\">Not active</option>\n            </select>\n          </div>\n\n          <div class=\"form-buttons\">\n            <button type=\"submit\" name=\"save\" class=\"button-primary-outline\" data-element=\"saveButton\">\n              ${this.productId ? 'Edit product' : 'Save product'}\n            </button>\n          </div>\n\n        </form>\n      </div>`;\n  }\n\n  getEmptyTemplate() {\n    return `<div>\n      <h1 class=\"page-title\">Page not found</h1>\n      <p>Sorry, this item does not exist.</p>\n    </div>`;\n  }\n\n  getSubElements(element) {\n    const subElements = Array.from(element.querySelectorAll('[data-element]'));\n    return subElements.reduce((result, subElement) => {\n      result[subElement.dataset.element] = subElement;\n      return result;\n    }, {});\n  }\n\n  remove() {\n    if (this.element) {\n      this.element.remove();\n    }\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    this.subElements = [];\n    this.product = {};\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9wcm9kdWN0LWZvcm0vaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wcm9kdWN0LWZvcm0vaW5kZXguanM/NWJkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU29ydGFibGVMaXN0IGZyb20gJy4uL3NvcnRhYmxlLWxpc3QvaW5kZXguanMnO1xuaW1wb3J0IGVzY2FwZUh0bWwgZnJvbSAnLi4vLi4vdXRpbHMvZXNjYXBlLWh0bWwuanMnO1xuaW1wb3J0IGZldGNoSnNvbiBmcm9tICcuLi8uLi91dGlscy9mZXRjaC1qc29uLmpzJztcblxuY29uc3QgSU1HVVJfQ0xJRU5UX0lEID0gcHJvY2Vzcy5lbnYuSU1HVVJfQ0xJRU5UX0lEO1xuY29uc3QgQkFDS0VORF9VUkwgPSBwcm9jZXNzLmVudi5CQUNLRU5EX1VSTDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZHVjdEZvcm0ge1xuICBlbGVtZW50ID0gbnVsbDtcbiAgc3ViRWxlbWVudHMgPSBbXTtcbiAgcHJvZHVjdCA9IHt9O1xuICBjYXRlZ29yaWVzID0ge307XG4gIGRlZmF1bHRQcm9kdWN0ID0ge1xuICAgIHRpdGxlOiAnJyxcbiAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgcXVhbnRpdHk6IDEsXG4gICAgc3ViY2F0ZWdvcnk6ICcnLFxuICAgIHN0YXR1czogMSxcbiAgICBpbWFnZXM6IFtdLFxuICAgIHByaWNlOiAxMDAsXG4gICAgZGlzY291bnQ6IDBcbiAgfTtcblxuICBsb2FkSW1hZ2UgPSBldmVudCA9PiB7XG4gICAgY29uc3QgbG9hZEltZ0J1dHRvbiA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cbiAgICBpbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgIGlucHV0LmFjY2VwdCA9ICdpbWFnZS8qJztcblxuICAgIGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgW2ltZ0ZpbGVdID0gZXZlbnQudGFyZ2V0LmZpbGVzO1xuXG4gICAgICBsb2FkSW1nQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnVwbG9hZFRvSW1ndXIoaW1nRmlsZSk7XG5cbiAgICAgIGxvYWRJbWdCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBjb25zdCBpbWcgPSB7XG4gICAgICAgICAgc291cmNlOiBpbWdGaWxlLm5hbWUsXG4gICAgICAgICAgdXJsOiByZXNwb25zZS5kYXRhLmxpbmtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnN1YkVsZW1lbnRzLmltYWdlTGlzdENvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZC5hcHBlbmQodGhpcy5nZXRJbWFnZUVsZW1lbnQoaW1nKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlucHV0LmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKSk7XG4gIH07XG5cbiAgc3VibWl0ID0gZXZlbnQgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLnNhdmUoKTtcbiAgfTtcblxuICBjb25zdHJ1Y3RvciAocHJvZHVjdElkID0gbnVsbCkge1xuICAgIHRoaXMucHJvZHVjdElkID0gcHJvZHVjdElkO1xuICB9XG5cbiAgYXN5bmMgc3dpdGNoRnJvbUFkZFRvRWRpdChwcm9kdWN0SWQpIHtcbiAgICB0aGlzLnByb2R1Y3RJZCA9IHByb2R1Y3RJZDtcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKHRoaXMucHJvZHVjdElkKTtcbiAgICB0aGlzLnByb2R1Y3QgPSBkYXRhLnByb2R1Y3Q7XG5cbiAgICB0aGlzLnN1YkVsZW1lbnRzLnNhdmVCdXR0b24uaW5uZXJUZXh0ID0gJ0VkaXQgcHJvZHVjdCc7XG4gIH1cblxuICBhc3luYyByZW5kZXIgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKHRoaXMucHJvZHVjdElkKTtcblxuICAgIHRoaXMucHJvZHVjdCA9IGRhdGEucHJvZHVjdDtcbiAgICB0aGlzLmNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgdGhpcy5kZWZhdWx0UHJvZHVjdC5zdWJjYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcmllc1swXS5zdWJjYXRlZ29yaWVzWzBdLmlkO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgd3JhcHBlci5pbm5lckhUTUwgPSB0aGlzLnByb2R1Y3RcbiAgICAgID8gdGhpcy5nZXRGb3JtKClcbiAgICAgIDogdGhpcy5nZXRFbXB0eVRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLmVsZW1lbnQgPSB3cmFwcGVyLmZpcnN0RWxlbWVudENoaWxkO1xuXG4gICAgaWYgKHRoaXMucHJvZHVjdCkge1xuICAgICAgdGhpcy5zdWJFbGVtZW50cyA9IHRoaXMuZ2V0U3ViRWxlbWVudHModGhpcy5lbGVtZW50KTtcblxuICAgICAgdGhpcy5maWxsRm9ybVdpdGhPYmplY3QodGhpcy5zdWJFbGVtZW50cy5wcm9kdWN0Rm9ybSwgdGhpcy5wcm9kdWN0KTtcbiAgICAgIHRoaXMuc2V0U29ydGFibGVJbWFnZUxpc3QoKTtcblxuICAgICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG5cbiAgaW5pdEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IHtwcm9kdWN0Rm9ybSwgaW1hZ2VMaXN0Q29udGFpbmVyfSA9IHRoaXMuc3ViRWxlbWVudHM7XG5cbiAgICBwcm9kdWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdCk7XG4gICAgcHJvZHVjdEZvcm0uZWxlbWVudHMudXBsb2FkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLmxvYWRJbWFnZSk7XG4gIH1cblxuICBhc3luYyBzYXZlKCkge1xuICAgIGNvbnN0IHsgcHJvZHVjdEZvcm0gfSA9IHRoaXMuc3ViRWxlbWVudHM7XG5cbiAgICBsZXQgbWV0aG9kID0gJ1BVVCc7XG4gICAgbGV0IGV2ZW50ID0gJ3Byb2R1Y3Qtc2F2ZWQnO1xuXG4gICAgaWYgKHRoaXMucHJvZHVjdElkKSB7XG4gICAgICBtZXRob2QgPSAnUEFUQ0gnO1xuICAgICAgZXZlbnQgPSAncHJvZHVjdC1lZGl0ZWQnO1xuICAgIH1cblxuICAgIHRoaXMuZmlsbE9iamVjdFdpdGhGb3JtKHRoaXMucHJvZHVjdCwgcHJvZHVjdEZvcm0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJ2FwaS9yZXN0L3Byb2R1Y3RzJywgQkFDS0VORF9VUkwpO1xuICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04J1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLnByb2R1Y3QpXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoSnNvbih1cmwuaHJlZiwgcGFyYW1zKTtcblxuICAgICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGV2ZW50LCB7XG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgIGRldGFpbDogeyByZXNwb25zZTogcmVzcG9uc2UgfVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3InLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBsb2FkVG9JbWd1cihpbWdGaWxlKSB7XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgaGVhZGVycy5hcHBlbmQoXCJBdXRob3JpemF0aW9uXCIsIGBDbGllbnQtSUQgJHtJTUdVUl9DTElFTlRfSUR9YCk7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2UnLCBpbWdGaWxlKTtcblxuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICByZWRpcmVjdDogJ2ZvbGxvdydcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBmZXRjaEpzb24oXCJodHRwczovL2FwaS5pbWd1ci5jb20vMy9pbWFnZVwiLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBmaWxsT2JqZWN0V2l0aEZvcm0ob2JqZWN0LCBmb3JtKSB7XG4gICAgY29uc3QgZXhjbHVkZWRGaWVsZHMgPSBbJ2ltYWdlcyddO1xuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMuZGVmYXVsdFByb2R1Y3QpLmZpbHRlcihmaWVsZCA9PiAhZXhjbHVkZWRGaWVsZHMuaW5jbHVkZXMoZmllbGQpKTtcbiAgICBjb25zdCBjb252ZXJ0VG9JbnQgPSBbJ3ByaWNlJywgJ2Rpc2NvdW50JywgJ3F1YW50aXR5JywgJ3N0YXR1cyddO1xuICAgIGNvbnN0IGltZ0hUTUxDb2xsZWN0aW9uID0gdGhpcy5zdWJFbGVtZW50cy5pbWFnZUxpc3RDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnNvcnRhYmxlLXRhYmxlX19jZWxsLWltZycpO1xuXG4gICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgb2JqZWN0W2ZpZWxkXSA9IGNvbnZlcnRUb0ludC5pbmNsdWRlcyhmaWVsZClcbiAgICAgICAgPyBwYXJzZUludChmb3JtLmVsZW1lbnRzW2ZpZWxkXVsndmFsdWUnXSlcbiAgICAgICAgOiBmb3JtLmVsZW1lbnRzW2ZpZWxkXVsndmFsdWUnXTtcbiAgICB9KTtcblxuICAgIG9iamVjdC5pbWFnZXMgPSBbLi4uaW1nSFRNTENvbGxlY3Rpb25dLm1hcChpbWcgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc291cmNlOiBpbWcuYWx0LFxuICAgICAgICB1cmw6IGltZy5zcmNcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5wcm9kdWN0SWQpIHtcbiAgICAgIG9iamVjdC5pZCA9IHRoaXMucHJvZHVjdElkO1xuICAgIH1cbiAgfVxuXG4gIGZpbGxGb3JtV2l0aE9iamVjdChmb3JtLCBvYmplY3QpIHtcbiAgICBjb25zdCBleGNsdWRlZEZpZWxkcyA9IFsnaW1hZ2VzJ107XG4gICAgY29uc3QgZmllbGRzID0gT2JqZWN0LmtleXModGhpcy5kZWZhdWx0UHJvZHVjdCkuZmlsdGVyKGZpZWxkID0+ICFleGNsdWRlZEZpZWxkcy5pbmNsdWRlcyhmaWVsZCkpO1xuXG4gICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgZm9ybS5lbGVtZW50c1tmaWVsZF1bJ3ZhbHVlJ10gPSBvYmplY3RbZmllbGRdIHx8IHRoaXMuZGVmYXVsdFByb2R1Y3RbZmllbGRdO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgbG9hZERhdGEoaWQgPSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBbY2F0ZWdvcmllcywgW3Byb2R1Y3RdXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgdGhpcy5nZXRDYXRlZ29yaWVzUHJvbWlzZSgpLFxuICAgICAgICB0aGlzLmdldFByb2R1Y3REYXRhUHJvbWlzZShpZClcbiAgICAgIF0pO1xuXG4gICAgICByZXR1cm4ge2NhdGVnb3JpZXMsIHByb2R1Y3R9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9kdWN0RGF0YVByb21pc2UoaWQpIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIGNvbnN0IHByb2R1Y3RVcmwgPSBuZXcgVVJMKCdhcGkvcmVzdC9wcm9kdWN0cycsIEJBQ0tFTkRfVVJMKTtcbiAgICAgIHByb2R1Y3RVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnaWQnLCBpZCk7XG5cbiAgICAgIHJldHVybiBmZXRjaEpzb24ocHJvZHVjdFVybC5ocmVmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFt0aGlzLmRlZmF1bHRQcm9kdWN0XTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRDYXRlZ29yaWVzUHJvbWlzZSgpIHtcbiAgICBjb25zdCBjYXRlZ29yaWVzVXJsID0gbmV3IFVSTCgnYXBpL3Jlc3QvY2F0ZWdvcmllcycsIEJBQ0tFTkRfVVJMKTtcbiAgICBjYXRlZ29yaWVzVXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ19zb3J0JywgJ3dlaWdodCcpO1xuICAgIGNhdGVnb3JpZXNVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnX3JlZnMnLCAnc3ViY2F0ZWdvcnknKTtcblxuICAgIHJldHVybiBmZXRjaEpzb24oY2F0ZWdvcmllc1VybC5ocmVmKTtcbiAgfVxuXG4gIGdldENhdFNlbGVjdEhUTUwoKSB7XG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgd3JhcHBlci5pbm5lckhUTUwgPSB0aGlzLmNhdGVnb3JpZXMubWFwKGNhdGVnb3J5ID0+IHtcbiAgICAgIGlmIChjYXRlZ29yeS5zdWJjYXRlZ29yaWVzKSB7XG4gICAgICAgIHJldHVybiBjYXRlZ29yeS5zdWJjYXRlZ29yaWVzLm1hcChzdWJjYXRlZ29yeSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGA8b3B0aW9uIHZhbHVlPVwiJHtzdWJjYXRlZ29yeS5pZH1cIj4ke2NhdGVnb3J5LnRpdGxlfSA+ICR7c3ViY2F0ZWdvcnkudGl0bGV9PC9vcHRpb24+YDtcbiAgICAgICAgfSkuam9pbignJyk7XG4gICAgICB9XG4gICAgfSkuam9pbignJyk7XG5cbiAgICByZXR1cm4gd3JhcHBlci5pbm5lckhUTUw7XG4gIH1cblxuICBzZXRTb3J0YWJsZUltYWdlTGlzdCgpIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMucHJvZHVjdC5pbWFnZXMubWFwKGltYWdlID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldEltYWdlRWxlbWVudChpbWFnZSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0YWJsZUxpc3QgPSBuZXcgU29ydGFibGVMaXN0KHtpdGVtc30pO1xuXG4gICAgdGhpcy5zdWJFbGVtZW50cy5pbWFnZUxpc3RDb250YWluZXIuYXBwZW5kKHNvcnRhYmxlTGlzdC5lbGVtZW50KTtcbiAgfVxuXG4gIGdldEltYWdlRWxlbWVudChpbWFnZSkge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGxpIGNsYXNzPVwicHJvZHVjdHMtZWRpdF9faW1hZ2VsaXN0LWl0ZW0gc29ydGFibGUtbGlzdF9faXRlbVwiIHN0eWxlPVwiXCI+XG4gICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgPGltZyBzcmM9XCIvaWNvbi1ncmFiLnN2Z1wiIGRhdGEtZ3JhYi1oYW5kbGU9XCJcIiBhbHQ9XCJncmFiXCI+XG4gICAgICAgICAgICA8aW1nIGNsYXNzPVwic29ydGFibGUtdGFibGVfX2NlbGwtaW1nXCIgYWx0PVwiJHtlc2NhcGVIdG1sKGltYWdlLnNvdXJjZSl9XCIgc3JjPVwiJHtlc2NhcGVIdG1sKGltYWdlLnVybCl9XCI+XG4gICAgICAgICAgICA8c3Bhbj4ke2VzY2FwZUh0bWwoaW1hZ2Uuc291cmNlKX08L3NwYW4+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgPGltZyBzcmM9XCIvaWNvbi10cmFzaC5zdmdcIiBkYXRhLWRlbGV0ZS1oYW5kbGU9XCJcIiBhbHQ9XCJkZWxldGVcIj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2xpPmA7XG5cbiAgICByZXR1cm4gd3JhcHBlci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgfVxuXG4gIGdldEZvcm0oKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0LWZvcm1cIj5cbiAgICAgICAgPGZvcm0gZGF0YS1lbGVtZW50PVwicHJvZHVjdEZvcm1cIiBjbGFzcz1cImZvcm0tZ3JpZFwiPlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZm9ybS1ncm91cF9faGFsZl9sZWZ0XCI+XG4gICAgICAgICAgICA8ZmllbGRzZXQ+XG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj5Qcm9kdWN0IG5hbWU8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJ0aXRsZVwiXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPVwiXCJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwidGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUHJvZHVjdCBuYW1lXCI+XG4gICAgICAgICAgICA8L2ZpZWxkc2V0PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZm9ybS1ncm91cF9fd2lkZVwiPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPkRlc2NyaXB0aW9uPC9sYWJlbD5cbiAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ9XCJcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtZWxlbWVudD1cInByb2R1Y3REZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUHJvZHVjdCBkZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgPC90ZXh0YXJlYT5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGZvcm0tZ3JvdXBfX3dpZGVcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj5JbWFnZTwvbGFiZWw+XG5cbiAgICAgICAgICAgIDxkaXYgZGF0YS1lbGVtZW50PVwiaW1hZ2VMaXN0Q29udGFpbmVyXCI+PC9kaXY+XG5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ1cGxvYWRJbWFnZVwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnV0dG9uLXByaW1hcnktb3V0bGluZSBmaXQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgIDxzcGFuPlVwbG9hZDwvc3Bhbj5cbiAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGZvcm0tZ3JvdXBfX2hhbGZfbGVmdFwiPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPkNhdGVnb3J5PC9sYWJlbD5cbiAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwic3ViY2F0ZWdvcnlcIiBpZD1cInN1YmNhdGVnb3J5XCI+XG4gICAgICAgICAgICAgICAgJHt0aGlzLmdldENhdFNlbGVjdEhUTUwoKX1cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZm9ybS1ncm91cF9faGFsZl9sZWZ0IGZvcm0tZ3JvdXBfX3R3by1jb2xcIj5cbiAgICAgICAgICAgIDxmaWVsZHNldD5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPlByaWNlICgkKTwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dCBpZD1cInByaWNlXCJcbiAgICAgICAgICAgICAgICAgICAgZXF1aXJlZD1cIlwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwicHJpY2VcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiJHt0aGlzLmRlZmF1bHRQcm9kdWN0LnByaWNlfVwiPlxuICAgICAgICAgICAgPC9maWVsZHNldD5cbiAgICAgICAgICAgIDxmaWVsZHNldD5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPkRpc2NvdW50ICgkKTwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dCBpZD1cImRpc2NvdW50XCJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ9XCJcIlxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImRpc2NvdW50XCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIiR7dGhpcy5kZWZhdWx0UHJvZHVjdC5kaXNjb3VudH1cIj5cbiAgICAgICAgICAgIDwvZmllbGRzZXQ+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBmb3JtLWdyb3VwX19wYXJ0LWhhbGZcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj5RdWFudGl0eTwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgaWQ9XCJxdWFudGl0eVwiXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPVwiXCJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cInF1YW50aXR5XCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIke3RoaXMuZGVmYXVsdFByb2R1Y3QucXVhbnRpdHl9XCI+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBmb3JtLWdyb3VwX19wYXJ0LWhhbGZcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj5TdGF0dXM8L2xhYmVsPlxuICAgICAgICAgICAgPHNlbGVjdCBpZD1cInN0YXR1c1wiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cInN0YXR1c1wiPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPkFjdGl2ZTwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMFwiPk5vdCBhY3RpdmU8L29wdGlvbj5cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tYnV0dG9uc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgbmFtZT1cInNhdmVcIiBjbGFzcz1cImJ1dHRvbi1wcmltYXJ5LW91dGxpbmVcIiBkYXRhLWVsZW1lbnQ9XCJzYXZlQnV0dG9uXCI+XG4gICAgICAgICAgICAgICR7dGhpcy5wcm9kdWN0SWQgPyAnRWRpdCBwcm9kdWN0JyA6ICdTYXZlIHByb2R1Y3QnfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9kaXY+YDtcbiAgfVxuXG4gIGdldEVtcHR5VGVtcGxhdGUgKCkge1xuICAgIHJldHVybiBgPGRpdj5cbiAgICAgIDxoMSBjbGFzcz1cInBhZ2UtdGl0bGVcIj5QYWdlIG5vdCBmb3VuZDwvaDE+XG4gICAgICA8cD5Tb3JyeSwgdGhpcyBpdGVtIGRvZXMgbm90IGV4aXN0LjwvcD5cbiAgICA8L2Rpdj5gO1xuICB9XG5cbiAgZ2V0U3ViRWxlbWVudHMoZWxlbWVudCkge1xuICAgIGNvbnN0IHN1YkVsZW1lbnRzID0gQXJyYXkuZnJvbShlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWVsZW1lbnRdJykpO1xuXG4gICAgcmV0dXJuIHN1YkVsZW1lbnRzLnJlZHVjZSgocmVzdWx0LCBzdWJFbGVtZW50KSA9PiB7XG4gICAgICByZXN1bHRbc3ViRWxlbWVudC5kYXRhc2V0LmVsZW1lbnRdID0gc3ViRWxlbWVudDtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCB7fSk7XG4gIH1cblxuICByZW1vdmUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5yZW1vdmUoKTtcbiAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuc3ViRWxlbWVudHMgPSBbXTtcbiAgICB0aGlzLnByb2R1Y3QgPSB7fTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBbURBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBNkNBO0FBbENBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUxBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTs7Ozs7QUFMQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTBDQTs7Ozs7Ozs7Ozs7O0FBWUE7Ozs7Ozs7OztBQVNBOzs7Ozs7Ozs7OztBQVdBOzs7Ozs7Ozs7Ozs7O0FBYUE7Ozs7O0FBdkZBO0FBNkZBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqWUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/product-form/index.js\n");

/***/ }),

/***/ "./src/components/sortable-list/index.js":
/*!***********************************************!*\
  !*** ./src/components/sortable-list/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SortableList; });\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass SortableList {\n  constructor({\n    items = []\n  } = {}) {\n    _defineProperty(this, \"element\", null);\n\n    _defineProperty(this, \"draggable\", null);\n\n    _defineProperty(this, \"placeholder\", null);\n\n    _defineProperty(this, \"pointerShift\", {});\n\n    _defineProperty(this, \"defaultTopShift\", 5);\n\n    _defineProperty(this, \"pointerdownHandler\", event => {\n      const element = event.target.closest('.sortable-list__item');\n      const grabHandle = event.target.closest('[data-grab-handle]');\n      const deleteHandle = event.target.closest('[data-delete-handle]');\n\n      if (grabHandle) {\n        event.preventDefault();\n        this.grabListItem(element, event);\n      }\n\n      if (deleteHandle) {\n        element.remove();\n      }\n    });\n\n    _defineProperty(this, \"pointermoveHandler\", ({\n      clientX,\n      clientY\n    }) => {\n      this.move(this.draggable, clientX, clientY);\n      const {\n        bottom: draggableBottom\n      } = this.draggable.getBoundingClientRect();\n      const prev = this.placeholder.previousElementSibling;\n      const next = this.placeholder.nextElementSibling;\n\n      if (prev) {\n        if (prev.getBoundingClientRect().bottom + this.defaultTopShift > draggableBottom) {\n          prev.before(this.placeholder);\n        }\n      }\n\n      if (next && next !== this.draggable) {\n        if (next.getBoundingClientRect().bottom - this.defaultTopShift < draggableBottom) {\n          next.after(this.placeholder);\n        }\n      }\n\n      this.scrollWhenNearWindowBorder(clientY);\n    });\n\n    _defineProperty(this, \"pointerupHandler\", event => {\n      const placeholderIndex = [...this.element.children].indexOf(this.placeholder);\n      this.removeDocumentListeners();\n      this.placeholder.replaceWith(this.draggable);\n      this.draggable.style = '';\n      this.draggable.classList.remove('sortable-list__item_dragging');\n      this.draggable = null;\n      this.placeholder = null;\n      this.pointerShift = {};\n\n      if (placeholderIndex !== this.elementInitialIndex) {\n        this.dispatchEvent('sortable-list-reorder', {\n          from: this.elementInitialIndex,\n          to: placeholderIndex\n        });\n      }\n    });\n\n    this.items = items;\n    this.render();\n    this.initEventListeners();\n  }\n\n  render() {\n    this.element = document.createElement('ul');\n    this.element.className = 'sortable-list';\n    this.element.innerHTML = this.items.map(item => {\n      item.classList.add('sortable-list__item');\n      return item.outerHTML;\n    }).join('');\n  }\n\n  initEventListeners() {\n    this.element.addEventListener('pointerdown', this.pointerdownHandler, true);\n  }\n\n  addDocumentListeners() {\n    document.addEventListener('pointermove', this.pointermoveHandler, true);\n    document.addEventListener('pointerup', this.pointerupHandler, true);\n  }\n\n  removeDocumentListeners() {\n    document.removeEventListener('pointermove', this.pointermoveHandler, true);\n    document.removeEventListener('pointerup', this.pointerupHandler, true);\n  }\n\n  scrollWhenNearWindowBorder(clientY) {\n    const windowHeight = document.documentElement.clientHeight;\n    const step = 10;\n    const indentFromWindowBorder = 20;\n\n    if (clientY >= windowHeight - indentFromWindowBorder) {\n      window.scrollBy(0, step);\n    }\n\n    if (clientY <= indentFromWindowBorder) {\n      window.scrollBy(0, -step);\n    }\n  }\n\n  grabListItem(element, {\n    clientX,\n    clientY\n  }) {\n    const placeholder = document.createElement('li');\n    const necessaryStyles = ['height', 'width'];\n    const draggableStyles = getComputedStyle(element);\n    this.elementInitialIndex = [...this.element.children].indexOf(element);\n    necessaryStyles.forEach(styleName => {\n      placeholder['style'][styleName] = draggableStyles[styleName];\n      element['style'][styleName] = draggableStyles[styleName];\n    });\n    this.pointerShift = this.getPointerShift(element, clientX, clientY);\n    element.classList.add('sortable-list__item_dragging');\n    placeholder.className = 'sortable-list__placeholder';\n    element.before(placeholder);\n    this.element.append(element);\n\n    element.ondragstart = () => false;\n\n    this.move(element, clientX, clientY);\n    this.draggable = element;\n    this.placeholder = placeholder;\n    this.addDocumentListeners();\n  }\n\n  getPointerShift(draggable, clientX, clientY) {\n    const {\n      left,\n      top\n    } = draggable.getBoundingClientRect();\n    return {\n      x: clientX - left,\n      y: clientY - top\n    };\n  }\n\n  move(element, clientX, clientY) {\n    element.style.left = clientX - this.pointerShift.x + 'px';\n    element.style.top = clientY - this.pointerShift.y + this.defaultTopShift + 'px';\n  }\n\n  dispatchEvent(type, detail) {\n    this.element.dispatchEvent(new CustomEvent(type, {\n      bubbles: true,\n      detail\n    }));\n  }\n\n  remove() {\n    if (this.element) {\n      this.element.remove();\n    }\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    this.removeDocumentListeners();\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9zb3J0YWJsZS1saXN0L2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc29ydGFibGUtbGlzdC9pbmRleC5qcz8wNWQxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvcnRhYmxlTGlzdCB7XG4gIGVsZW1lbnQgPSBudWxsO1xuICBkcmFnZ2FibGUgPSBudWxsO1xuICBwbGFjZWhvbGRlciA9IG51bGw7XG4gIHBvaW50ZXJTaGlmdCA9IHt9O1xuICBkZWZhdWx0VG9wU2hpZnQgPSA1O1xuXG4gIHBvaW50ZXJkb3duSGFuZGxlciA9IGV2ZW50ID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5zb3J0YWJsZS1saXN0X19pdGVtJyk7XG4gICAgY29uc3QgZ3JhYkhhbmRsZSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdbZGF0YS1ncmFiLWhhbmRsZV0nKTtcbiAgICBjb25zdCBkZWxldGVIYW5kbGUgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnW2RhdGEtZGVsZXRlLWhhbmRsZV0nKTtcblxuICAgIGlmIChncmFiSGFuZGxlKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB0aGlzLmdyYWJMaXN0SXRlbShlbGVtZW50LCBldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGRlbGV0ZUhhbmRsZSkge1xuICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG5cbiAgcG9pbnRlcm1vdmVIYW5kbGVyID0gKHtjbGllbnRYLCBjbGllbnRZfSkgPT4ge1xuICAgIHRoaXMubW92ZSh0aGlzLmRyYWdnYWJsZSwgY2xpZW50WCwgY2xpZW50WSk7XG5cbiAgICBjb25zdCB7Ym90dG9tOiBkcmFnZ2FibGVCb3R0b219ID0gdGhpcy5kcmFnZ2FibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICBjb25zdCBwcmV2ID0gdGhpcy5wbGFjZWhvbGRlci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIGNvbnN0IG5leHQgPSB0aGlzLnBsYWNlaG9sZGVyLm5leHRFbGVtZW50U2libGluZztcblxuICAgIGlmIChwcmV2KSB7XG4gICAgICBpZiAocHJldi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gKyB0aGlzLmRlZmF1bHRUb3BTaGlmdCA+IGRyYWdnYWJsZUJvdHRvbSkge1xuICAgICAgICBwcmV2LmJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSB0aGlzLmRyYWdnYWJsZSkge1xuICAgICAgaWYgKG5leHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIC0gdGhpcy5kZWZhdWx0VG9wU2hpZnQgPCBkcmFnZ2FibGVCb3R0b20pIHtcbiAgICAgICAgbmV4dC5hZnRlcih0aGlzLnBsYWNlaG9sZGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbFdoZW5OZWFyV2luZG93Qm9yZGVyKGNsaWVudFkpO1xuICB9O1xuXG4gIHBvaW50ZXJ1cEhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXJJbmRleCA9IFsuLi50aGlzLmVsZW1lbnQuY2hpbGRyZW5dLmluZGV4T2YodGhpcy5wbGFjZWhvbGRlcik7XG5cbiAgICB0aGlzLnJlbW92ZURvY3VtZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLnBsYWNlaG9sZGVyLnJlcGxhY2VXaXRoKHRoaXMuZHJhZ2dhYmxlKTtcblxuICAgIHRoaXMuZHJhZ2dhYmxlLnN0eWxlID0gJyc7XG4gICAgdGhpcy5kcmFnZ2FibGUuY2xhc3NMaXN0LnJlbW92ZSgnc29ydGFibGUtbGlzdF9faXRlbV9kcmFnZ2luZycpO1xuXG4gICAgdGhpcy5kcmFnZ2FibGUgPSBudWxsO1xuICAgIHRoaXMucGxhY2Vob2xkZXIgPSBudWxsO1xuICAgIHRoaXMucG9pbnRlclNoaWZ0ID0ge307XG5cbiAgICBpZiAocGxhY2Vob2xkZXJJbmRleCAhPT0gdGhpcy5lbGVtZW50SW5pdGlhbEluZGV4KSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ3NvcnRhYmxlLWxpc3QtcmVvcmRlcicsIHtcbiAgICAgICAgZnJvbTogdGhpcy5lbGVtZW50SW5pdGlhbEluZGV4LFxuICAgICAgICB0bzogcGxhY2Vob2xkZXJJbmRleFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHtpdGVtcyA9IFtdfSA9IHt9KSB7XG4gICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xuXG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICB0aGlzLmluaXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9ICdzb3J0YWJsZS1saXN0JyA7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IHRoaXMuaXRlbXMubWFwKGl0ZW0gPT4ge1xuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdzb3J0YWJsZS1saXN0X19pdGVtJyk7XG5cbiAgICAgIHJldHVybiBpdGVtLm91dGVySFRNTDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfVxuXG4gIGluaXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLnBvaW50ZXJkb3duSGFuZGxlciwgdHJ1ZSk7XG4gIH1cblxuICBhZGREb2N1bWVudExpc3RlbmVycygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIHRoaXMucG9pbnRlcm1vdmVIYW5kbGVyLCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCB0aGlzLnBvaW50ZXJ1cEhhbmRsZXIsIHRydWUpO1xuICB9XG5cbiAgcmVtb3ZlRG9jdW1lbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCB0aGlzLnBvaW50ZXJtb3ZlSGFuZGxlciwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgdGhpcy5wb2ludGVydXBIYW5kbGVyLCB0cnVlKTtcbiAgfVxuXG4gIHNjcm9sbFdoZW5OZWFyV2luZG93Qm9yZGVyKGNsaWVudFkpIHtcbiAgICBjb25zdCB3aW5kb3dIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgIGNvbnN0IHN0ZXAgPSAxMDtcbiAgICBjb25zdCBpbmRlbnRGcm9tV2luZG93Qm9yZGVyID0gMjA7XG5cbiAgICBpZiAoY2xpZW50WSA+PSB3aW5kb3dIZWlnaHQgLSBpbmRlbnRGcm9tV2luZG93Qm9yZGVyKSB7XG4gICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgc3RlcCk7XG4gICAgfVxuICAgIGlmIChjbGllbnRZIDw9IGluZGVudEZyb21XaW5kb3dCb3JkZXIpIHtcbiAgICAgIHdpbmRvdy5zY3JvbGxCeSgwLCAtc3RlcCk7XG4gICAgfVxuICB9XG5cbiAgZ3JhYkxpc3RJdGVtKGVsZW1lbnQsIHtjbGllbnRYLCBjbGllbnRZfSkge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBjb25zdCBuZWNlc3NhcnlTdHlsZXMgPSBbJ2hlaWdodCcsICd3aWR0aCddO1xuICAgIGNvbnN0IGRyYWdnYWJsZVN0eWxlcyA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG5cbiAgICB0aGlzLmVsZW1lbnRJbml0aWFsSW5kZXggPSBbLi4udGhpcy5lbGVtZW50LmNoaWxkcmVuXS5pbmRleE9mKGVsZW1lbnQpO1xuXG4gICAgbmVjZXNzYXJ5U3R5bGVzLmZvckVhY2goc3R5bGVOYW1lID0+IHtcbiAgICAgIHBsYWNlaG9sZGVyWydzdHlsZSddW3N0eWxlTmFtZV0gPSBkcmFnZ2FibGVTdHlsZXNbc3R5bGVOYW1lXTtcbiAgICAgIGVsZW1lbnRbJ3N0eWxlJ11bc3R5bGVOYW1lXSA9IGRyYWdnYWJsZVN0eWxlc1tzdHlsZU5hbWVdO1xuICAgIH0pO1xuXG4gICAgdGhpcy5wb2ludGVyU2hpZnQgPSB0aGlzLmdldFBvaW50ZXJTaGlmdChlbGVtZW50LCBjbGllbnRYLCBjbGllbnRZKTtcblxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc29ydGFibGUtbGlzdF9faXRlbV9kcmFnZ2luZycpO1xuICAgIHBsYWNlaG9sZGVyLmNsYXNzTmFtZSA9ICdzb3J0YWJsZS1saXN0X19wbGFjZWhvbGRlcic7XG5cbiAgICBlbGVtZW50LmJlZm9yZShwbGFjZWhvbGRlcik7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZChlbGVtZW50KTtcblxuICAgIGVsZW1lbnQub25kcmFnc3RhcnQgPSAoKSA9PiBmYWxzZTtcblxuICAgIHRoaXMubW92ZShlbGVtZW50LCBjbGllbnRYLCBjbGllbnRZKTtcblxuICAgIHRoaXMuZHJhZ2dhYmxlID0gZWxlbWVudDtcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XG5cbiAgICB0aGlzLmFkZERvY3VtZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBnZXRQb2ludGVyU2hpZnQoZHJhZ2dhYmxlLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgY29uc3Qge2xlZnQsIHRvcH0gPSBkcmFnZ2FibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgeDogY2xpZW50WCAtIGxlZnQsXG4gICAgICB5OiBjbGllbnRZIC0gdG9wXG4gICAgfTtcbiAgfVxuXG4gIG1vdmUoZWxlbWVudCwgY2xpZW50WCwgY2xpZW50WSkge1xuICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IGNsaWVudFggLSB0aGlzLnBvaW50ZXJTaGlmdC54ICsgJ3B4JztcbiAgICBlbGVtZW50LnN0eWxlLnRvcCA9IGNsaWVudFkgLSB0aGlzLnBvaW50ZXJTaGlmdC55ICsgdGhpcy5kZWZhdWx0VG9wU2hpZnQgKyAncHgnO1xuICB9XG5cbiAgZGlzcGF0Y2hFdmVudCh0eXBlLCBkZXRhaWwpIHtcbiAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQodHlwZSwge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGRldGFpbFxuICAgIH0pKTtcbiAgfVxuXG4gIHJlbW92ZSgpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnJlbW92ZSgpO1xuICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5yZW1vdmVEb2N1bWVudExpc3RlbmVycygpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQW9FQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE4Q0E7QUE3Q0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1QkE7QUFyQkE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBOUtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/sortable-list/index.js\n");

/***/ }),

/***/ "./src/pages/products/edit/index.js":
/*!******************************************!*\
  !*** ./src/pages/products/edit/index.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Page; });\n/* harmony import */ var _components_product_form_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/product-form/index.js */ \"./src/components/product-form/index.js\");\n/* harmony import */ var _components_notification__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/notification */ \"./src/components/notification/index.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nclass Page {\n  constructor(path) {\n    _defineProperty(this, \"element\", void 0);\n\n    _defineProperty(this, \"subElements\", {});\n\n    _defineProperty(this, \"components\", {});\n\n    const pathName = path.split('/').pop();\n    this.productId = pathName === 'add' ? null : pathName;\n  }\n\n  async render() {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = this.template;\n    this.element = wrapper.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n    await this.initComponents();\n    this.renderComponents();\n    this.initEventListeners();\n    return this.element;\n  }\n\n  async initComponents() {\n    const productForm = new _components_product_form_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.productId);\n    await productForm.render();\n    this.components = {\n      productForm\n    };\n  }\n\n  renderComponents() {\n    Object.keys(this.subElements).forEach(key => {\n      if (this.components.hasOwnProperty(key)) {\n        this.subElements[key].append(this.components[key].element);\n      }\n    });\n  }\n\n  initEventListeners() {\n    this.subElements.productForm.addEventListener('product-edited', event => {\n      this.showNotification('success', 'Product has been edited');\n    });\n    this.subElements.productForm.addEventListener('product-saved', async event => {\n      const main = document.querySelector('main');\n      main.classList.add('is-loading');\n      this.productId = event.detail.response.id;\n      this.setPageTitle('Edit');\n      history.pushState(null, null, '/products/' + this.productId);\n      await this.components.productForm.switchFromAddToEdit(this.productId);\n      main.classList.remove('is-loading');\n      this.showNotification('success', 'Product has been saved');\n    });\n  }\n\n  showNotification(type, message) {\n    const notification = new _components_notification__WEBPACK_IMPORTED_MODULE_1__[\"default\"](message, {\n      duration: 3000,\n      type: type\n    });\n    notification.show();\n  }\n\n  setPageTitle(title) {\n    this.subElements.pageTitle.innerHTML = `<a href=\"/products\" class=\"link\">Products</a> / ${title}`;\n  }\n\n  get template() {\n    const pageName = this.productId ? 'Edit' : 'Add';\n    return `<div class=\"products-edit\">\n              <div class=\"content__top-panel\">\n                <h1 class=\"page-title\" data-element='pageTitle'>\n                  <a href=\"/products\" class=\"link\">Products</a> / ${pageName}\n                </h1>\n              </div>\n              <div class=\"content-box\" data-element='productForm'></div>\n            </div>`;\n  }\n\n  getSubElements(element) {\n    const subElements = element.querySelectorAll('[data-element]');\n    return [...subElements].reduce((result, subElement) => {\n      result[subElement.dataset.element] = subElement;\n      return result;\n    }, {});\n  }\n\n  remove() {\n    if (this.element) {\n      this.element.remove();\n    }\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    this.subElements = null;\n\n    for (const component of Object.values(this.components)) {\n      component.destroy();\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvcHJvZHVjdHMvZWRpdC9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9wYWdlcy9wcm9kdWN0cy9lZGl0L2luZGV4LmpzP2VhYjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2R1Y3RGb3JtIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvcHJvZHVjdC1mb3JtL2luZGV4LmpzJztcbmltcG9ydCBOb3RpZmljYXRpb24gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9ub3RpZmljYXRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlIHtcbiAgZWxlbWVudDtcbiAgc3ViRWxlbWVudHMgPSB7fTtcbiAgY29tcG9uZW50cyA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKHBhdGgpIHtcbiAgICBjb25zdCBwYXRoTmFtZSA9IHBhdGguc3BsaXQoJy8nKS5wb3AoKTtcblxuICAgIHRoaXMucHJvZHVjdElkID0gKHBhdGhOYW1lID09PSAnYWRkJykgPyBudWxsIDogcGF0aE5hbWU7XG4gIH1cblxuICBhc3luYyByZW5kZXIoKSB7XG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgd3JhcHBlci5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlO1xuICAgIHRoaXMuZWxlbWVudCA9IHdyYXBwZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbiAgICB0aGlzLnN1YkVsZW1lbnRzID0gdGhpcy5nZXRTdWJFbGVtZW50cyh0aGlzLmVsZW1lbnQpO1xuXG4gICAgYXdhaXQgdGhpcy5pbml0Q29tcG9uZW50cygpO1xuICAgIHRoaXMucmVuZGVyQ29tcG9uZW50cygpO1xuICAgIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG5cbiAgYXN5bmMgaW5pdENvbXBvbmVudHMoKSB7XG4gICAgY29uc3QgcHJvZHVjdEZvcm0gPSBuZXcgUHJvZHVjdEZvcm0odGhpcy5wcm9kdWN0SWQpO1xuXG4gICAgYXdhaXQgcHJvZHVjdEZvcm0ucmVuZGVyKCk7XG5cbiAgICB0aGlzLmNvbXBvbmVudHMgPSB7XG4gICAgICBwcm9kdWN0Rm9ybSxcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyQ29tcG9uZW50cygpIHtcbiAgICBPYmplY3Qua2V5cyh0aGlzLnN1YkVsZW1lbnRzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAodGhpcy5jb21wb25lbnRzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdGhpcy5zdWJFbGVtZW50c1trZXldLmFwcGVuZCh0aGlzLmNvbXBvbmVudHNba2V5XS5lbGVtZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGluaXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLnN1YkVsZW1lbnRzLnByb2R1Y3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2R1Y3QtZWRpdGVkJywgZXZlbnQgPT4ge1xuICAgICAgdGhpcy5zaG93Tm90aWZpY2F0aW9uKCdzdWNjZXNzJywgJ1Byb2R1Y3QgaGFzIGJlZW4gZWRpdGVkJyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnN1YkVsZW1lbnRzLnByb2R1Y3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2R1Y3Qtc2F2ZWQnLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG5cbiAgICAgIG1haW4uY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuXG4gICAgICB0aGlzLnByb2R1Y3RJZCA9ICBldmVudC5kZXRhaWwucmVzcG9uc2UuaWQ7XG4gICAgICB0aGlzLnNldFBhZ2VUaXRsZSgnRWRpdCcpO1xuICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgJy9wcm9kdWN0cy8nICsgdGhpcy5wcm9kdWN0SWQpO1xuICAgICAgYXdhaXQgdGhpcy5jb21wb25lbnRzLnByb2R1Y3RGb3JtLnN3aXRjaEZyb21BZGRUb0VkaXQodGhpcy5wcm9kdWN0SWQpO1xuXG4gICAgICBtYWluLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvYWRpbmcnKTtcblxuICAgICAgdGhpcy5zaG93Tm90aWZpY2F0aW9uKCdzdWNjZXNzJywgJ1Byb2R1Y3QgaGFzIGJlZW4gc2F2ZWQnKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNob3dOb3RpZmljYXRpb24odHlwZSwgbWVzc2FnZSkge1xuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24obWVzc2FnZSwge1xuICAgICAgZHVyYXRpb246IDMwMDAsXG4gICAgICB0eXBlOiB0eXBlXG4gICAgfSk7XG5cbiAgICBub3RpZmljYXRpb24uc2hvdygpO1xuICB9XG5cbiAgc2V0UGFnZVRpdGxlKHRpdGxlKSB7XG4gICAgdGhpcy5zdWJFbGVtZW50cy5wYWdlVGl0bGUuaW5uZXJIVE1MID0gYDxhIGhyZWY9XCIvcHJvZHVjdHNcIiBjbGFzcz1cImxpbmtcIj5Qcm9kdWN0czwvYT4gLyAke3RpdGxlfWA7XG4gIH1cblxuICBnZXQgdGVtcGxhdGUoKSB7XG4gICAgY29uc3QgcGFnZU5hbWUgPSB0aGlzLnByb2R1Y3RJZCA/ICdFZGl0JyA6ICdBZGQnO1xuXG4gICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwicHJvZHVjdHMtZWRpdFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudF9fdG9wLXBhbmVsXCI+XG4gICAgICAgICAgICAgICAgPGgxIGNsYXNzPVwicGFnZS10aXRsZVwiIGRhdGEtZWxlbWVudD0ncGFnZVRpdGxlJz5cbiAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvcHJvZHVjdHNcIiBjbGFzcz1cImxpbmtcIj5Qcm9kdWN0czwvYT4gLyAke3BhZ2VOYW1lfVxuICAgICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1ib3hcIiBkYXRhLWVsZW1lbnQ9J3Byb2R1Y3RGb3JtJz48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PmA7XG4gIH1cblxuICBnZXRTdWJFbGVtZW50cyhlbGVtZW50KSB7XG4gICAgY29uc3Qgc3ViRWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWVsZW1lbnRdJyk7XG5cbiAgICByZXR1cm4gWy4uLnN1YkVsZW1lbnRzXS5yZWR1Y2UoKHJlc3VsdCwgc3ViRWxlbWVudCkgPT4ge1xuICAgICAgcmVzdWx0W3N1YkVsZW1lbnQuZGF0YXNldC5lbGVtZW50XSA9IHN1YkVsZW1lbnQ7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwge30pO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnN1YkVsZW1lbnRzID0gbnVsbDtcblxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIE9iamVjdC52YWx1ZXModGhpcy5jb21wb25lbnRzKSkge1xuICAgICAgY29tcG9uZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBS0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTs7OztBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBIQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/pages/products/edit/index.js\n");

/***/ }),

/***/ "./src/utils/escape-html.js":
/*!**********************************!*\
  !*** ./src/utils/escape-html.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (string => string.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;'));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvZXNjYXBlLWh0bWwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvZXNjYXBlLWh0bWwuanM/OGVjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBzdHJpbmcgPT4gc3RyaW5nXHJcbiAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcclxuICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXHJcbiAgLnJlcGxhY2UoLycvZywgJyYjMzk7JylcclxuICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXHJcbiAgLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/escape-html.js\n");

/***/ }),

/***/ "./src/utils/fetch-json.js":
/*!*********************************!*\
  !*** ./src/utils/fetch-json.js ***!
  \*********************************/
/*! exports provided: default, FetchError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FetchError\", function() { return FetchError; });\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// same as fetch, but throws FetchError in case of errors\n// status >= 400 is an error\n// network error / json error are errors\n/* harmony default export */ __webpack_exports__[\"default\"] = (async function (url, params) {\n  let response;\n\n  try {\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\n    response = await fetch(url.toString(), params);\n  } catch (err) {\n    throw new FetchError(response, \"Network error has occurred.\");\n  }\n\n  let body;\n\n  if (!response.ok) {\n    let errorText = response.statusText; // Not Found (for 404)\n\n    try {\n      body = await response.json();\n      errorText = body.error && body.error.message || body.data && body.data.error && body.data.error.message || errorText;\n    } catch (error) {\n      /* ignore failed body */\n    }\n\n    let message = `Error ${response.status}: ${errorText}`;\n    throw new FetchError(response, body, message);\n  }\n\n  try {\n    return await response.json();\n  } catch (err) {\n    throw new FetchError(response, null, err.message);\n  }\n});\nclass FetchError extends Error {\n  constructor(response, body, message) {\n    super(message);\n\n    _defineProperty(this, \"name\", \"FetchError\");\n\n    this.response = response;\n    this.body = body;\n  }\n\n} // handle uncaught failed fetch through\n\nwindow.addEventListener('unhandledrejection', event => {\n  if (event.reason instanceof FetchError) {\n    alert(event.reason.message);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvZmV0Y2gtanNvbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy91dGlscy9mZXRjaC1qc29uLmpzPzNiNTgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc2FtZSBhcyBmZXRjaCwgYnV0IHRocm93cyBGZXRjaEVycm9yIGluIGNhc2Ugb2YgZXJyb3JzXHJcbi8vIHN0YXR1cyA+PSA0MDAgaXMgYW4gZXJyb3JcclxuLy8gbmV0d29yayBlcnJvciAvIGpzb24gZXJyb3IgYXJlIGVycm9yc1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24odXJsLCBwYXJhbXMpIHtcclxuICBsZXQgcmVzcG9uc2U7XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBOT1RFOiBcInRvU3RyaW5nXCIgY2FsbCBuZWVkZWQgZm9yIGNvcnJlY3Qgd29yayBvZiBcImplc3QtZmV0Y2gtbW9ja1wiXHJcbiAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCBwYXJhbXMpO1xyXG4gIH0gY2F0Y2goZXJyKSB7XHJcbiAgICB0aHJvdyBuZXcgRmV0Y2hFcnJvcihyZXNwb25zZSwgXCJOZXR3b3JrIGVycm9yIGhhcyBvY2N1cnJlZC5cIik7XHJcbiAgfVxyXG5cclxuICBsZXQgYm9keTtcclxuXHJcbiAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgbGV0IGVycm9yVGV4dCA9IHJlc3BvbnNlLnN0YXR1c1RleHQ7IC8vIE5vdCBGb3VuZCAoZm9yIDQwNClcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBib2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgZXJyb3JUZXh0ID0gKGJvZHkuZXJyb3IgJiYgYm9keS5lcnJvci5tZXNzYWdlKSB8fCAoYm9keS5kYXRhICYmIGJvZHkuZGF0YS5lcnJvciAmJiBib2R5LmRhdGEuZXJyb3IubWVzc2FnZSkgfHwgZXJyb3JUZXh0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHsgLyogaWdub3JlIGZhaWxlZCBib2R5ICovIH1cclxuXHJcbiAgICBsZXQgbWVzc2FnZSA9IGBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306ICR7ZXJyb3JUZXh0fWA7XHJcblxyXG4gICAgdGhyb3cgbmV3IEZldGNoRXJyb3IocmVzcG9uc2UsIGJvZHksIG1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgfSBjYXRjaChlcnIpIHtcclxuICAgIHRocm93IG5ldyBGZXRjaEVycm9yKHJlc3BvbnNlLCBudWxsLCBlcnIubWVzc2FnZSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmV0Y2hFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICBuYW1lID0gXCJGZXRjaEVycm9yXCI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHJlc3BvbnNlLCBib2R5LCBtZXNzYWdlKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgIHRoaXMuYm9keSA9IGJvZHk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBoYW5kbGUgdW5jYXVnaHQgZmFpbGVkIGZldGNoIHRocm91Z2hcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VuaGFuZGxlZHJlamVjdGlvbicsIGV2ZW50ID0+IHtcclxuICBpZiAoZXZlbnQucmVhc29uIGluc3RhbmNlb2YgRmV0Y2hFcnJvcikge1xyXG4gICAgYWxlcnQoZXZlbnQucmVhc29uLm1lc3NhZ2UpO1xyXG4gIH1cclxufSk7XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/fetch-json.js\n");

/***/ })

}]);